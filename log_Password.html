<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Libraries, frameworks and functions -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script> 
    <link rel="stylesheet" href="stylesheet.css">
    <script src="functions.js"></script>
    <!-- Meta Tags for SEO -->
    <title>Fake Analytics | Data over lies</title>
    <meta name="description" content="Fake Analytics delivers cutting-edge insights into fake news trends, misinformation analysis, and data-driven investigations. Explore how analytics can reveal the truth behind digital deception.">
    <meta name="google-site-verification" content="myGoogleSearchConsole_exampleTag123">
    <link rel="canonical" href="https://www.fakeanalytics.com/">
    <!-- Google Tag Manager -->
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-IADE1234');
      </script>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-IADE1234"
    height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>  
<!-- Login Modal -->
<div class="custom-modal">
    <div class="custom-modal-header">
      <h5 class="custom-modal-title" id="loginModalLabel">Recover your password</h5>
      <button type="button" class="custom-close-btn" data-bs-dismiss="modal" aria-label="Close">Ã—</button>
    </div>
    <div class="custom-modal-body">
      <form>
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" required>
        </div>
        <div class="form-group">
          <label for="password">New Password</label>
          <input type="password" id="password" required>
        </div>
        <button type="submit" class="login-button">Submit</button>
      </form>
      <div class="login-links">
        <a href="/log_SignIn.html">Already have an account? Login</a>
      </div>
    </div>
  </div>
</body>
</html>

<script>
    // Closing login form
    document.addEventListener("DOMContentLoaded", function () {
    const closeBtn = document.querySelector(".custom-close-btn");

    if (closeBtn) {
      closeBtn.addEventListener("click", function () {
        window.location.href = "/main_homepage.html";
      });
    }
  });

    // Existing users search in localStorage
    document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector(".custom-modal-body form");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const oldError = document.getElementById("reset-error");
      if (oldError) oldError.remove();

      const email = document.getElementById("email").value.trim();
      const newPassword = document.getElementById("password").value;

      let users = [];
      try {
        users = JSON.parse(localStorage.getItem("users")) || [];
      } catch (err) {
        console.error("Error parsing users from localStorage", err);
      }

      const userIndex = users.findIndex(user => user.email === email);

      if (userIndex === -1) {
        insertResetError("No account found with that email.");
        return;
      }

      // Password update
      users[userIndex].password = newPassword;
      localStorage.setItem("users", JSON.stringify(users));

      const modalBody = document.querySelector(".custom-modal-body");
      modalBody.innerHTML = `
        <div style="background-color: #fff3cd; color: #856404; padding: 1rem; border-radius: 0.375rem;" role="alert">
          Password updated successfully!
        </div>
      `;

      setTimeout(() => {
        window.location.href = "/log_SignIn.html";
      }, 2000);
    });

    function insertResetError(message) {
      const emailField = document.getElementById("email");
      const errorDiv = document.createElement("div");
      errorDiv.id = "reset-error";
      errorDiv.className = "text-danger mb-2";
      errorDiv.textContent = message;
      emailField.parentNode.insertBefore(errorDiv, emailField);
    }
  });
</script>


